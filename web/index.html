<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    >
    <meta name="theme-color" content="#ffffff">
    <title>StellaTracker</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header class="app-header">
      <img src="/icon-192.png" alt="StellaTracker logo" class="logo">
      <h1>StellaTracker</h1>
    </header>

    <main>
      <!-- Quick Presets -->
      <section class="card">
        <h2 class="card-title">Quick Presets</h2>
        <div class="flex" id="presets"></div>
      </section>

      <!-- Add Log Entry -->
      <section class="card">
        <h2 class="card-title">Add Log Entry</h2>
        <div class="row">
          <div>
            <label>Metric</label>
            <select id="metric"></select>
          </div>
          <div>
            <label>Value (optional)</label>
            <input id="value" type="text" placeholder="">
          </div>
          <div style="grid-column: 1 / -1;">
            <label>Notes (optional)</label>
            <textarea id="note" rows="2" placeholder=""></textarea>
          </div>
          <div>
            <label>Timestamp</label>
            <input id="ts" type="datetime-local">
          </div>
        </div>

        <div id="accidentRow" class="row" style="display:none; margin-top:8px;">
          <div>
            <label>Accident Location</label>
            <select id="location">
              <option value="">â€”</option>
              <option value="inside">Inside</option>
              <option value="outside">Outside</option>
              <option value="crate">Crate</option>
            </select>
          </div>
          <div>
            <label>Accident Size</label>
            <select id="severity">
              <option value="">â€”</option>
              <option value="small">Small</option>
              <option value="medium">Medium</option>
              <option value="large">Large</option>
            </select>
          </div>
        </div>

        <div id="energyRow" class="row" style="display:none; margin-top:8px;">
          <div>
            <label>Energy (0â€“5)</label>
            <input id="energy" type="range" min="0" max="5" step="1" value="3">
          </div>
        </div>

        <div class="actions" style="margin-top:12px;">
          <button id="saveBtn" class="btn btn-primary">Save Entry</button>
          <button id="flushBtn" class="btn">Sync Pending</button>
        </div>
      </section>

      <!-- Toolbar (view controls / theme) -->
      <section class="card toolbar">
        <div class="toolbar-left">
          <div class="brand-subtitle">Care Logs & Trends</div>
        </div>
        <div class="toolbar-right">
          <button id="refreshBtn" class="btn">Refresh</button>
          <button id="exportBtn" class="btn btn-accent">Export CSV</button>
          <button id="themeToggle" class="btn" title="Toggle light/dark" aria-label="Toggle theme">ðŸŒ™</button>
        </div>
      </section>

      <!-- History -->
      <section class="card">
        <div class="flex" style="justify-content:space-between; align-items:center;">
          <h2 class="card-title" style="margin:0;">History</h2>
          <div class="control">
            <select id="historyRange">
              <option value="7">Last 7 days</option>
              <option value="30" selected>Last 30 days</option>
              <option value="90">Last 90 days</option>
            </select>
          </div>
        </div>
        <div id="historyList" class="grid"></div>
        <div id="historyEmpty" class="empty" style="display:none;">No history in this range yet.</div>
      </section>

      <!-- Entry Summary -->
      <section class="card">
        <h2 class="card-title">Entry Summary</h2>
        <div id="todayCounts" class="grid muted"></div>
        <div id="summaryEmpty" class="empty" style="display:none;">No entries yet today.</div>
      </section>

      <!-- Entry Details -->
      <section class="card">
        <h2 id="entriesHeader" class="card-title">Entry Details (last 30 days)</h2>
        <div id="entries" class="entries"></div>
        <div id="entriesEmpty" class="empty" style="display:none;">No entries to show.</div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>