/*
  StellaTracker â€“ Professional UI Refresh (styling-only)
  - CSS variables (design tokens) + clean light/dark
  - Card, button, input polish; focus-visible a11y
  - Responsive tweaks
*/

/* Tokens */
:root {
  --bg: #f7f7f8;
  --surface: #ffffff;
  --surface-2: #fafafa;
  --border: #e6e6eb;
  --text: #0f1720;
  --text-muted: #5f6b7a;

  --brand: #0b5fff;
  --brand-hover: #0a52db;

  --accent-bg: #f3f6ff;
  --accent-border: #c7d2fe;
  --accent-text: #1f3a93;

  --danger: #b00020;
  --focus: #2563eb;

  --radius: 12px;
  --radius-sm: 8px;
  --shadow-1: 0 1px 2px rgba(0,0,0,0.06);
  --shadow-2: 0 2px 10px rgba(0,0,0,0.08);

  --sp-1: 4px; --sp-2: 8px; --sp-3: 12px; --sp-4: 16px; --sp-5: 20px; --sp-6: 24px;
}

/* Manual dark override via data-theme */
html[data-theme="dark"] {
  --bg: #0b0e12;
  --surface: #0f141a;
  --surface-2: #121820;
  --border: #1f2732;
  --text: #e6eaf0;
  --text-muted: #9aa3af;

  --brand: #3b82f6;
  --brand-hover: #2563eb;

  --accent-bg: #0b1220;
  --accent-border: #1f2a44;
  --accent-text: #cfe1ff;

  --focus: #60a5fa;
}

/* System dark preference (fallback/auto) */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0e12;
    --surface: #0f141a;
    --surface-2: #121820;
    --border: #1f2732;
    --text: #e6eaf0;
    --text-muted: #9aa3af;

    --brand: #3b82f6;
    --brand-hover: #2563eb;

    --accent-bg: #0b1220;
    --accent-border: #1f2a44;
    --accent-text: #cfe1ff;

    --focus: #60a5fa;
  }
}

/* Base */
html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  margin: 0; padding: 0;
  background: var(--bg); color: var(--text);
}

/* Header */
header.app-header {
  position: sticky; top: 0; z-index: 10;
  background: color-mix(in srgb, var(--surface), transparent 10%);
  backdrop-filter: saturate(180%) blur(10px);
  border-bottom: 1px solid var(--border);
  padding: var(--sp-3) var(--sp-4);
  display:flex; gap:var(--sp-3); align-items:center;
}
.logo { width:28px; height:28px; border-radius:6px; background:#ddd; }
h1 { font-size: 18px; margin: 0; }

/* Layout */
main { padding: var(--sp-4); display:grid; gap: var(--sp-6); max-width: 1000px; margin: 0 auto; }
.row { display: grid; grid-template-columns: 1fr 1fr; gap: var(--sp-3); }
.grid { display:grid; gap:var(--sp-2); }
.flex { display:flex; gap:var(--sp-2); align-items:center; flex-wrap: wrap; }
.space { height:var(--sp-1); }

/* Card */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--sp-4);
  box-shadow: var(--shadow-1);
  transition: box-shadow 120ms ease, transform 120ms ease;
}
.card:hover { box-shadow: var(--shadow-2); }
.card-title,
.card h2 { border-bottom: 1px solid var(--border); padding-bottom: var(--sp-2); margin-bottom: var(--sp-3); font-size: 18px; }

/* Toolbar */
.toolbar { display:flex; justify-content:space-between; align-items:center; gap:12px; }
.brand-subtitle { font-size:13px; color: var(--text-muted); }
.toolbar-right { display:flex; gap:8px; }

/* Form / Inputs */
label { font-size: 14px; display:block; margin: 6px 0; color: var(--text); }
input, select, textarea, button {
  font-size: 16px; padding: 10px;
  border: 1px solid color-mix(in srgb, var(--border), #000 4%);
  border-radius: var(--radius-sm);
  width: 100%; box-sizing: border-box; background: var(--surface); color: var(--text);
}
input::placeholder, textarea::placeholder { color: #9aa3af; }

/* Focus styles */
*:focus { outline: none; }
*:focus-visible { outline: 3px solid var(--focus); outline-offset: 2px; border-radius: var(--radius-sm); }

/* Buttons */
button { cursor: pointer; }
.btn {
  display:inline-flex; align-items:center; justify-content:center; gap:6px;
  padding: 10px 14px;
  border:1px solid color-mix(in srgb, var(--border), #000 4%);
  border-radius: var(--radius-sm);
  background: var(--surface);
  color: var(--text);
  transition: background 120ms, border-color 120ms, box-shadow 120ms, transform 80ms;
}
.btn:hover {
  background: color-mix(in srgb, var(--surface), #000 4%);
  border-color: color-mix(in srgb, var(--border), #000 12%);
}
.btn:active { transform: translateY(1px); box-shadow: inset 0 1px 2px rgba(0,0,0,0.08); }
.btn-primary { background:var(--brand); color:#fff; border-color:var(--brand); }
.btn-primary:hover { background:var(--brand-hover); border-color:var(--brand-hover); }
.btn-accent { background:var(--accent-bg); border-color:var(--accent-border); color:var(--accent-text); }
.btn-accent:hover { background: color-mix(in srgb, var(--accent-bg), #fff 8%); }
.iconbtn { border: none; background: transparent; cursor: pointer; font-size: 16px; padding: 4px 6px; }

/* Helpers */
.pill {
  display:inline-block;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  background: var(--surface-2);
  border: 1px solid var(--border);
  margin-right:6px;
  color: var(--text);
  font-weight: 600;
}
.muted { color:var(--text-muted); font-size:12px; }
.mono { font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; text-align:right; font-size: 13px; }
.danger { color:var(--danger); }
.actions { display:flex; gap:8px; align-items:flex-end; }

/* Entries */
.entries { display:grid; gap:var(--sp-2); }
.entry {
  padding:10px;
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  background: var(--surface);
  color: var(--text);
}
.entries .entry:nth-child(even) { background: var(--surface-2); }

/* Presets */
.preset {
  padding:8px 10px; border:1px solid var(--border);
  border-radius:999px; background: var(--surface-2);
}

/* History */
.history-row {
  display:grid; grid-template-columns: 220px 1fr 100px;
  gap:var(--sp-2); align-items:center; padding:6px 8px; border-radius:8px;
}
.history-row:hover { background: var(--surface-2); }
.history-row h3 { margin:0; font-size:14px; font-weight:600; }
.spark { color: var(--text); }
.spark svg { display:block; width:100%; height:28px; }

/* Subheads & separators */
.subhead { font-size: 13px; font-weight: 600; color: var(--text); margin:8px 0 4px; }
.rule { border-top:1px solid var(--border); margin:12px 0; }

/* Empty states */
.empty { padding: 16px; text-align:center; color: var(--text-muted); }

/* Mobile */
@media (max-width: 600px) {
  .row { grid-template-columns: 1fr; }
  .history-row { grid-template-columns: 1fr; gap:4px; }
  .history-row h3 { font-size: 13px; }
  .spark svg { height:24px; }
}